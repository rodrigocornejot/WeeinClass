<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Registrar Matr√≠cula</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

    <style>
        .hidden { display: none; }
    </style>
</head>

<body>
<div class="container mt-5">

    <h3 class="text-center mb-4">Registrar Matr√≠cula</h3>

    <div class="d-flex justify-content-between mb-3">
        <a href="{% url 'menu_admin' %}" class="btn btn-secondary">‚¨Ö Volver</a>
        <a href="{% url 'lista_matriculas' %}" class="btn btn-dark">üìã Ver matr√≠culas</a>
    </div>

    <!-- üîç BUSCAR POR DNI -->
    <form method="get" class="mb-4">
        <label class="form-label">DNI del alumno</label>
        <input type="text"
               name="dni"
               class="form-control"
               placeholder="Ingrese DNI"
               value="{{ dni }}">
        <button class="btn btn-secondary mt-2">Buscar</button>
    </form>

    <!-- üìå MOSTRAR ALUMNO -->
    <div class="mb-3">
        <label class="form-label">Alumno</label>
        <input type="text"
               class="form-control"
               value="{% if alumno %}{{ alumno.nombre }}{% else %}No encontrado{% endif %}"
               readonly>
    </div>

    <!-- üìù FORMULARIO MATR√çCULA -->
    <form method="post">
        {% csrf_token %}
        <input type="hidden" name="dni" value="{{ dni }}">

        <!-- CURSO -->
        <div class="mb-3">
            {{ form.curso.label_tag }}
            {{ form.curso }}
        </div>

        <!-- MODALIDAD -->
        <div class="mb-3">
            {{ form.modalidad.label_tag }}
            {{ form.modalidad }}
        </div>

        <!-- TIPO HORARIO -->
        <div class="mb-3">
            {{ form.tipo_horario.label_tag }}
            {{ form.tipo_horario }}
        </div>

        <!-- D√çAS -->
        <div class="mb-3 hidden" id="dias_box">
            {{ form.dias.label_tag }}
            {{ form.dias }}
        </div>

        <!-- FECHA INICIO -->
        <div class="mb-3">
            {{ form.fecha_inicio.label_tag }}
            {{ form.fecha_inicio }}
        </div>

        <!-- COSTOS -->
        <div class="row">
            <div class="col-md-4">
                <label>Costo</label>
                <input type="number" name="costo_curso" class="form-control">
            </div>
            <div class="col-md-4">
                <label>Primer pago</label>
                <input type="number" name="primer_pago" class="form-control">
            </div>
            <div class="col-md-4">
                <label>Porcentaje</label>
                <input type="number" name="porcentaje" class="form-control">
            </div>
        </div>

        <div class="text-center mt-4">
            <button class="btn btn-success">Guardar Matr√≠cula</button>
        </div>
    </form>
</div>

<script>
function toggleDias() {
    let tipo = $('#id_tipo_horario').val();
    $('#dias_box').toggle(tipo === 'full' || tipo === 'extendida');
}

$('#id_tipo_horario').on('change', toggleDias);
$(document).ready(toggleDias);
</script>

</body>
</html>
